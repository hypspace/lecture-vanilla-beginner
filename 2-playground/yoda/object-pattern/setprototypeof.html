<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Object Pattern - setPrototypeOf</title>
  </head>
  <body>
    <script>
      // 설명: Object.setPrototypeOf()는 객체의 프로토타입을 설정하거나 변경하는 메서드
      //  Object.assign과 유사함. Object.assign은 속성값을 뽑아서 다른 것으로 만들 수 있는 패턴인데
      //  setPrototypeOf는 말 그대로 prototype에만 추가하는 것이라 굉장히 단순하고 명확한 기능을 유지함
      //  setPrototypeOf MDN 폴리필을 보면 Object.setPrototypeOf || obj.__proto__ = proto 이런식으로 되어 있는데
      //  던더프로토가 원래는 이전까지는 비표준에 해당했음. 내부에 있는거라 함부로 접근해서 쓰지 말라고 했음. JS에서 _라는 기호 자체가
      //  프라이빗 필드를 표현했기 때문. 그러나 지금은 아예 대놓고 표준으로 하는 추세며 던더프로토를 써도 됨. 그러나 성능상의 이유로
      //  언더바 사용을 자제하가는 가이드라인이 있음
      //  setPrototypeOf 메서드를 활용해서 객체의 프로토타입으로 설정하거나 변경하여 상속 계층의 객체를 만들 수 있음
      //  그리고 setPrototypeOf는 말 그대로 모듈 덩어리를 만들고 싶을 때 사용하면 됨
      //  Object.create를 쓰냐 혹은 Object.setPrototypeOf을 쓰냐는 자유이지 똑같음. 그러나 상속 구조가 들어갈 때 좀 더 확인해 봐야하고
      //  결과적으로는 es5에 Object.create를 쓰던 es6 Object.assign을 쓰던 Object.setPrototypeOf을 쓰던 모듈이나 클래스를 만들 때는
      //  이것들은 표준적인 방법 중의 하나이고 순수 JS를 이용한 객체 생성 패턴이라고 할 수 있음

      const healthObj = {
        showHealth: function () {
          console.log(this.lastTime)
        },
        setHealth: function (newTime) {
          this.lastTime = newTime
        },
      }

      const myHealth = Object.setPrototypeOf(
        {
          name: 'wang',
          lastTime: '11:20',
        },
        healthObj
      ) // myHealth 객체에 프로토타입으로 healthObj 지정

      console.log(myHealth.showHealth())
    </script>
  </body>
</html>
