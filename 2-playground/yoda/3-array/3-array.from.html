<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <ul>
      <li>1</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
    </ul>

    <script>
      /* Array.from() */

      // - 설명:
      //  - JS에는 배열같이 보이지만 실제 배열이 아닌 데이터가 여럿 존재. 이러한 데이터는 통상 유사-배열 객체라고 부르거나 이터러블 객체에 해당함. ES6에서는 이러한 유사-배열 혹은 가짜-배열이라고 불리는 데이터를 실제 배열로 변환해주는 메서드인 Array.from()을 추가함
      //  - 유사-배열(가짜-배열) 객체를 from 메서드로 감싸서 배열로 변환하고 이를 순회할 수 있음. 예전에는 Array.prototype.slice.call을 통해서 코드를 길게 작성하면서 해결했지만 이제는 Array.from()이라는 표준적인 방법대로 가짜-배열을 실제 배열로 변환하고 나아가서 배열의 프로토타입 메서드인 filter, map, concat 등을 쓸 수 있게 됨

      // 1. 유사-배열 객체 예시

      // - arguments 객체: 가변적인 매개변수가 들어오는 경우에 가끔씩 쓰는 경우가 있음. 파라미터를 받지 않아도 arguments 객체에서 바로 접근 가능하기 때문에 때로는 막강한 것. 그러나 아주 권장되는 패턴은 아님. 그래서 배열이라고 생각할 수 있지만 실제 배열 프로토타입 메서드는 쓸 수 없는 것으로 보아 유사-배열 객체에 해당함
      function foo() {
        for (let i = 0; i < arguments.length; i++) {
          console.log(arguments[i])
        }
      }
      foo(1, 2, 3)
      /* 출력 결과:
         1
         2
         3
      */
      function foo2() {
        arguments.map(console.log)
      }
      foo2(1, 2, 3) // Error! arguments는 배열이 아님

      // - NodeList 객체: querySelectorAll을 통해서 반환되는 NodeList 객체도 유사 배열에 해당함
      const lis = document.querySelectorAll('li')
      console.log(typeof lis) // "object"

      // 2. 유사-배열 객체를 실제 배열로 변환하여 해결하는 방법

      // - Array.prototype.slice.call
      const lisArr = Array.prototype.slice.call(lis)
      console.log(lisArr) // [li, li, li, li]

      // - ES6 Array.from: 표준적인 방법
      const lisArr2 = Array.from(lis)
      console.log(lisArr2) // [li, li, li, li]

      // - 기타: Event Delegation(이벤트 위임) 패턴을 활용하여 애초에 querySelectorAll을 쓰지 않고 상위 노드에 해당하는 ul 태그에 이벤트를 걸어 놓음. 이후에 data-set 또는 기타 분기 처리가 가능한 요소에 접근하여 조건식을 달아 해결함
      const ul = document.querySelector('ul')
      ul.addEventListener('click', e => handleClickList(e.target.dataset))

      function handleClickList(dataset) {
        // ...
      }
    </script>
  </body>
</html>
