<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Function - arrow function and this</title>
  </head>
  <body>
    <script>
      // 설명: 화살표 함수를 통해서 구문을 축약할 수 있음. 그러나 this가 가리키는 컨텍스트는 변경되지 않음
      //  이는 화살표 함수가 함수가 정의된 위치의 상위 스코프에서 this를 상속받기 때문
      //  다시 말해 자신의 실행 컨텍스트가 아니라 외부의 컨텍스트를 상속받음

      //  화살표 함수: this를 상위 스코프에서 상속받음. 자신이 어디에 정의되어 있는지
      //  일반 함수: this는 호출 시점의 컨텍스트에 따라 결정됨. 호출이 어디서부터 되었는지

      document.addEventListener('DOMContentLoaded', () => console.log(this)) // window

      document.addEventListener('DOMContentLoaded', function () {
        console.log(this) // #document
      })

      const obj = {
        value: 'this is the obj',
        method() {
          document.addEventListener(
            'DOMContentLoaded',
            function () {
              console.log(this)
            }.bind(this)
          )
        },
      }

      obj.method() // {value: 'this is the obj', method: ƒ}
    </script>
  </body>
</html>
